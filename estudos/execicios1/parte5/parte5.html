<!DOCTYPE html>
<html lang="PT-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../../../tutorial/imagens/blockly_sql.png">
    <title>Primeiros Passos</title>

    <!-- Estilização da página -->
    <link rel="stylesheet" media="screen and (min-width: 860px)" href="../widescreen.css">
    <link rel="stylesheet" media="screen and (max-width: 860px)" href="../smallscreen.css">

    <!-- Uso da biblioteca Blockly -->
    <script src="https://unpkg.com/blockly/blockly.min.js"></script>

    <!-- Blocos Personalisados -->
    <script src="../customBlocks.js"></script>

    <!-- Código Personalisados -->
    <script src="../colorirCodigo.js"></script>

    <!-- Gerador MySQL -->
    <script src="https://unpkg.com/blockly/lua_compressed.js"></script>
    <script src="../../../Blocos/geradorMySQL.js"></script>

    <!-- Boostrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container-fluid">
                <ul class="navbar-nav d-flex align-items-center">
                    <span class="navbar-brand mb-0 h1" style="padding: 1vh;">
                        <a class="nav-link" href="../../estudo.html" style="color: aliceblue;"
                            title="Voltar para estudos">
                            <i class="bi bi-arrow-bar-left"></i> Exercícios</a>
                    </span>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <a class="blocklyLogo" href="https://developers.google.com/blockly" target="_blank"
                        title="Blockly Site">
                        <img class="image-responsive"
                            src="https://developers.google.com/blockly/images/logos/logo_built_on.png" width="60px">
                    </a>
                </ul>
            </div>
        </nav>
    </header>

    <div class="container card text-center bg-dark">
        <div class="card-header">
            EXERCÍCIO
        </div>
        <div class="card-body">
            Identifique os blocos e <span style="color: rgb(209, 209, 157);">ALTERE</span> 
            a tabela para que o INSERT seja correto.
        </div>
    </div>

    <div id="blocklyDiv"></div>

    <pre id="Codigo" style="resize: none;" readonly></pre>

    <div class="divBotao">
        <button type="button" class="btn btn-success" data-toggle="modal" data-target="#myModal"
            onclick="verificarResposta()"> Enviar resposta
        </button>
    </div>

    <div class="modal fade" id="myModal">
        <div class="modal-dialog modal-dialog-centered">
            <div id="respostaErrada" class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Resposta não aceita! <span style="color: red;">
                        <i class="bi bi-emoji-dizzy-fill"></i></span></h4>
                </div>
                <div class="modal-body" style="text-align: justify; text-justify: inter-word; word-wrap: break-word;">
                    Correção não realizada ou código com erros persistentes.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Fechar</button>
                </div>
            </div>
            <div id="respostaCorreta" class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Resposta correta! <span style="color: green;"><i
                                class="bi bi-emoji-smile-fill"></i></span></h4>
                    <button type="button" class="btn btn-danger close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body" style="text-align: justify; text-justify: inter-word;">
                    <p class="text-center">EXPLICAÇÃO</p>
                    Comandos ALTER TABLE podem ser usados para alterações a uma tabela já existente no banco, 
                    evitando assim a necessidade de recria-lá perdendo os dados presentes nela.
                </div>
                <div class="modal-footer">
                    <a class="btn btn-success" href="../../estudo.html">
                        Voltar para a tela de estudos.
                    </a>
                </div>
            </div>
        </div>
    </div>
</body>

<xml id="xml1" style="display: none">
    <block type="start_sql" x="10" y="0">
        <field name="db_name">database</field>
        <next>
            <block type="create_table">
                <field name="table_name">pessoa</field>
                <statement name="table_var">
                    <block type="table_var">
                        <field name="var_name">id</field>
                        <field name="type">INTEGER</field>
                        <field name="opcao"> NOT NULL AUTO_INCREMENT</field>
                        <next>
                            <block type="table_var">
                                <next>
                                    <block type="table_var">
                                        <field name="var_name">sexo</field>
                                        <field name="type">CHAR(1)</field>
                                        <next>
                                            <block type="table_var">
                                                <field name="var_name">data_nascimento</field>
                                                <field name="type">TIMESTAMP</field>
                                                <next>
                                                    <block type='table_var'>
                                                        <field name="var_name">cpf</field>
                                                        <field name="opcao"> UNIQUE</field>
                                                        <next>
                                                            <block type='table_var'>
                                                                <field name="var_name">profissao</field>
                                                                <next>
                                                                    <block type="table_var_pk">
                                                                        <field name="var_name">id</field>
                                                                    </block>
                                                                </next>
                                                            </block>
                                                        </next>
                                                    </block>
                                                </next>
                                            </block>
                                        </next>
                                    </block>
                                </next>
                            </block>
                        </next>
                    </block>
                </statement>
                <next>
                    <block type="insert_table">
                        <field name="table_name">pessoa</field>
                        <field name="vars">id,nome,sexo,idade,cpf,profissao</field>
                        <statement name="insert_var">
                            <block type="insert_start">
                                <value name="insert_var">
                                    <block type="insert_var_default">
                                        <value name="insert_var">
                                            <block type="insert_var">
                                                <field name="var_input">Anderson Joaquim Lima</field>
                                                <value name="insert_var">
                                                    <block type="insert_var">
                                                        <field name="var_input">M</field>
                                                        <value name="insert_var">
                                                            <block type="insert_var">
                                                                <field name="var_input">25</field>
                                                                <value name="insert_var">
                                                                    <block type="insert_var">
                                                                        <field name="var_input">109.419.057-80</field>
                                                                        <value name="insert_var">
                                                                            <block type="insert_var">
                                                                                <field name="var_input">Advogado</field>
                                                                            </block>
                                                                        </value>
                                                                    </block>
                                                                </value>
                                                            </block>
                                                        </value>
                                                    </block>
                                                </value>
                                            </block>
                                        </value>
                                    </block>
                                </value>
                            </block>
                        </statement>
                    </block>
                </next>
            </block>
        </next>
    </block>
    <block type="alter_table" x="150" y="330">
        <field name="table_name">pessoa</field>
        <field name="operation">ADD</field>
        <field name="column_name">idade</field>
        <field name="type">INTEGER</field>
    </block>
    <block type="alter_table" x="260" y="380">
        <field name="table_name">pessoa</field>
        <field name="operation">DROP COLUMN</field>
        <field name="column_name">cpf</field>
    </block>
    <block type="alter_table" x="150" y="430">
        <field name="table_name">pessoa</field>
        <field name="operation">ADD</field>
        <field name="column_name">profissao</field>
        <field name="type">VARCHAR(30)</field>
    </block>
    <block type="alter_table" x="260" y="480">
        <field name="table_name">pessoa</field>
        <field name="operation">DROP COLUMN</field>
        <field name="column_name">data_nascimento</field>
    </block>
    <block type="alter_table" x="150" y="530">
        <field name="table_name">pessoa</field>
        <field name="operation">DROP COLUMN</field>
        <field name="column_name">idade</field>
    </block>
</xml>

<script src="./parte5.js"></script>

</html>